import numpy as np
from skimage.color import rgb2lab, lab2rgb

dic = {
    (0, 16): 0, (0, 17): 1, (0, 18): 2, (0, 19): 3, (0, 20): 4,
    (1, 13): 5, (1, 14): 6, (1, 15): 7, (1, 16): 8, (1, 17): 9, (1, 18): 10, (1, 19): 11, (1, 20): 12,
    (2, 11): 13, (2, 12): 14, (2, 13): 15, (2, 14): 16, (2, 15): 17, (2, 16): 18, (2, 17): 19, (2, 18): 20, (2, 19): 21, (2, 20): 22,
    (3, 9): 23, (3, 10): 24, (3, 11): 25, (3, 12): 26, (3, 13): 27, (3, 14): 28, (3, 15): 29, (3, 16): 30, (3, 17): 31, (3, 18): 32, (3, 19): 33, (3, 20): 34,
    (4, 8): 35, (4, 9): 36, (4, 10): 37, (4, 11): 38, (4, 12): 39, (4, 13): 40, (4, 14): 41, (4, 15): 42, (4, 16): 43, (4, 17): 44, (4, 18): 45, (4, 19): 46, (4, 20): 47, (4, 21): 48,
    (5, 7): 49, (5, 8): 50, (5, 9): 51, (5, 10): 52, (5, 11): 53, (5, 12): 54, (5, 13): 55, (5, 14): 56, (5, 15): 57, (5, 16): 58, (5, 17): 59, (5, 18): 60, (5, 19): 61, (5, 20): 62, (5, 21): 63,
    (6, 6): 64, (6, 7): 65, (6, 8): 66, (6, 9): 67, (6, 10): 68, (6, 11): 69, (6, 12): 70, (6, 13): 71, (6, 14): 72, (6, 15): 73, (6, 16): 74, (6, 17): 75, (6, 18): 76, (6, 19): 77, (6, 20): 78, (6, 21): 79,
    (7, 6): 80, (7, 7): 81, (7, 8): 82, (7, 9): 83, (7, 10): 84, (7, 11): 85, (7, 12): 86, (7, 13): 87, (7, 14): 88, (7, 15): 89, (7, 16): 90, (7, 17): 91, (7, 18): 92, (7, 19): 93, (7, 20): 94, (7, 21): 95
    # (8, 5): , (8, 6): , (8, 7): , (8, 8): , (8, 9): , (8, 10): , (8, 11): , (8, 12): , (8, 13): , (8, 14): , (8, 15): , (8, 16): , (8, 17): , (8, 18): , (8, 19): , (8, 20): , (8, 21)
    # (9, 4): , (9, 5): , (9, 6): , (9, 7): , (9, 8): , (9, 9): , (9, 10): , (9, 11): , (9, 12): , (9, 13): , (9, 14): , (9, 15): , (9, 16): , (9, 17): , (9, 18): , (9, 19): , (9, 20): , (9, 21)
    # (10, 3): , (10, 4): , (10, 5): , (10, 6): , (10, 7): , (10, 8): , (10, 9): , (10, 10): , (10, 11): , (10, 12): , (10, 13): , (10, 14): , (10, 15): , (10, 16): , (10, 17): , (10, 18): , (10, 19): , (10, 20)
    # (11, 3): , (11, 4): , (11, 5): , (11, 6): , (11, 7): , (11, 8): , (11, 9): , (11, 10): , (11, 11): , (11, 12): , (11, 13): , (11, 14): , (11, 15): , (11, 16): , (11, 17): , (11, 18): , (11, 19): , (11, 20)
    # (12, 2): , (12, 3): , (12, 4): , (12, 5): , (12, 6): , (12, 7): , (12, 8): , (12, 9): , (12, 10): , (12, 11): , (12, 12): , (12, 13): , (12, 14): , (12, 15): , (12, 16): , (12, 17): , (12, 18): , (12, 19): , (12, 20)
    # (13, 1): , (13, 2): , (13, 3): , (13, 4): , (13, 5): , (13, 6): , (13, 7): , (13, 8): , (13, 9): , (13, 10): , (13, 11): , (13, 12): , (13, 13): , (13, 14): , (13, 15): , (13, 16): , (13, 17): , (13, 18): , (13, 19): , (13, 20)
    # (14, 1): , (14, 2): , (14, 3): , (14, 4): , (14, 5): , (14, 6): , (14, 7): , (14, 8): , (14, 9): , (14, 10): , (14, 11): , (14, 12): , (14, 13): , (14, 14): , (14, 15): , (14, 16): , (14, 17): , (14, 18): , (14, 19)
    # (15, 0): , (15, 1): , (15, 2): , (15, 3): , (15, 4): , (15, 5): , (15, 6): , (15, 7): , (15, 8): , (15, 9): , (15, 10): , (15, 11): , (15, 12): , (15, 13): , (15, 14): , (15, 15): , (15, 16): , (15, 17): , (15, 18): , (15, 19)
    # (16, 0): , (16, 1): , (16, 2): , (16, 3): , (16, 4): , (16, 5): , (16, 6): , (16, 7): , (16, 8): , (16, 9): , (16, 10): , (16, 11): , (16, 12): , (16, 13): , (16, 14): , (16, 15): , (16, 16): , (16, 17): , (16, 18): , (16, 19)
    # (17, 0): , (17, 1): , (17, 2): , (17, 3): , (17, 4): , (17, 5): , (17, 6): , (17, 7): , (17, 8): , (17, 9): , (17, 10): , (17, 11): , (17, 12): , (17, 13): , (17, 14): , (17, 15): , (17, 16): , (17, 17): , (17, 18)
    # (18, 0): , (18, 1): , (18, 2): , (18, 3): , (18, 4): , (18, 5): , (18, 6): , (18, 7): , (18, 8): , (18, 9): , (18, 10): , (18, 11): , (18, 12): , (18, 13): , (18, 14): , (18, 15): , (18, 16): , (18, 17): , (18, 18)
    # (19, 2): , (19, 3): , (19, 4): , (19, 5): , (19, 6): , (19, 7): , (19, 8): , (19, 9): , (19, 10): , (19, 11)
}
global bins
n_rows = 20
n_cols = 22
bins = np.array([[dic.get((i, j), -1) for j in range(n_cols)] for i in range(n_rows)])


def convert_lab_to_label(lab):
    _, a, b = lab
    i = (a + 95) // 10
    j = (b + 115) // 10
    label = bins[i, j]
    return label
convert_lab_to_label((50, -80, 15))