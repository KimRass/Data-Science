## 핵심 이슈
- 고객에게 어떤 아이템을 권할 것인가

## 1. 신규 고객(고객에 대한 정보 없음) : 
### 1-1. 비개인화 추천(Non-personalized Recommendation)

#### (1) 신규 아이템 추천
- ex. 2020년에 개봉한 영화 추천

#### (2) 평이 좋은 아이템 추천
- explicit data가 있을 때만 사용 가능한 방법
    - 점수, 후기 등 사용자가 자신의 선호를 직접적으로 데이터
- ex. 평점의 평균이 높은 영화 추천(이때 평점의 갯수가 너무 적은 것은 통계적 신뢰성이 낮으므로 제외해야 함
![image.png](/files/2897183296657798424)

#### (3) 인기 아이템 추천
- implicit data에도 사용 가능한 방법
    - 장바구니 기록, 시청 횟수 등 사용자가 자신의 선호를 직접적으로 드러내지 않은 데이터
    - 따라서 고객은 자신이 선호하는 아이템에 대해서 주로 로그를 발생시킨다고 가정하여 접근(ex. 사람들은 좋아하는 음악을 많이 듣지, 좋아하지 않는 음악은 거의 듣지 않음. 따라서 주로 긍정적 반응이 기록됨)
    - 사용자의 행동에 따라 자동으로 기록되므로 explicit data보다 밀하다(dense)(평점은 고객이 작성해야 데이터화되지만 로그는 자동으로 기록됨)
    - 그러나 로그 횟수를 별점으로 해석하면 안 됨. 즉 10번 들은 곡보다 1000번 들은 곡을 100배 좋아하는 것은 아님. 또한 로그는 오래된 곡에 대한 것일수록 많을 수밖에 없음.
- ex. 쿠팡에서 고객들의 클릭 횟수가 가장 많은 제품 추천

#### 1-2. 연관 분석(Association Analysis)
- 대용량의 거래 데이터로부터 "X를 구매했으면, Y를 구매할 것이다" 형식의 아이템 간 연관 관계를 분석하는 방법
- 보통 장바구니 분석(Market Basket Analysis)로 불리기도 합니다. 즉, 고객의 장바구니에 어떤 아이템이 동시 담겼는지 패턴을 파악하여 상품을 추천하는 방법입니다.
- 전체 사용자들 중 아이템 y를 좋아하는 비율(support)보다 아이템 x를 좋아하는 사용자들 중 아이템 y도 좋아하는 비율(confidence)가 매우 크다면 아이템 x와 y는 매우 연관 관계가 높을 것입니다.(lift = confidence/support가 클수록 연관 관계가 높음. lift가 얼마 이상이어야 연관 관계가 높은지에 대한 판단은 정해진 것이 없음)
- 반면에 전체 사용자들 중 아이템 y를 좋아하는 비율(support)보다 아이템 x를 좋아하는 사용자들 중 아이템 y도 좋아하는 비율(confidence)이 매우 작다면 아이템 x와 y는 매우 연관 관계가 낮을 것입니다.
- "lift"의 의미는 어떤 사용자가 아이템 x를 좋아한다는 사실이 아이템 y를 좋아할 가능성을 높인다는 의미입니다.
![image.png](/files/2897185491077259291)
![image.png](/files/2897192442878929486)
![image.png](/files/2897216028255083795)
- (평점을 4점 이상 준 것을 해당 영화를 좋아한다는 표시로 볼 때)
![image.png](/files/2897223100503478269)
![image.png](/files/2897223649049314373)
## 2. 기존 고객 재방문(고객에 대한 약간의 정보 있음)

### 2-1. Content-based Filtering
- 고객 또는 아이템의 세부 정보를 바탕으로 추천하는 것(ex. 영화 "One Day"에 높은 평점을 준 고객에게 동일한 장르의 영화를 추천)
- 그러나 추천한 영화가 "One Day"와 장르는 동일하지만 세부적인 내용이 완전히 달라 선호하지 않을 수 있음. 또한 고객이 좋아하는 영화 중 "One Day"와 장르가 다른 영화는 추천할 수 없음
-  가 동일하지만 세부적인 내용은 상당히 다를 수 있습니다. 또한 장르는 다르지만 해당 사용자가 좋아할 만한 영화도 있을 수 있습니다.
- 이렇게 장르와 같이 한정적인 정보만으로는 정교한 추천이 어려우며 영화별로 출연 배우나 감독 등 더 세부적인 정보를 수집하는 것 또한 많은 시간과 노력을 필요로 함

### 2-2. 협업 필터링(Collaborative Filtering; CF)
- 고객과 아이템 간 상호작용 데이터 활용
![image.png](/files/2897216528858841004)
- User-Item Matrix 만들기
![image.png](/files/2897217367888338068)
![image.png](/files/2894306909154838854)
고객 79,044명, 영화 3,413개
#### (1) Memory-based
- 별도의 특성 추출 과정 없음
##### User-based 협업 필터링
-  어떤 사용자와 유사한 취향을 가진 사용자가 좋아하는 아이템을 추천
##### Item-based 협업 필터링
- 어떤 아이템과 유사한 아이템을 추천
- Item Similarity Matrix 구하기
![image.png](/files/2894307485867318551)
![image.png](/files/2894308048110108101)
- 한계 : 연산량이 지나치게 많아 실시간으로 반영하기 어려움
![image.png](/files/2894309708398398954)

#### (2) Model-based
- 특성을 추출하여 embedding vectors 생성

##### 행렬 분해(Matrix Factorization)
- 아래 예시는 2차원이지만 실제로는 100차원 이상을 사용하기도 합니다.
![MF](https://i.imgur.com/zvx2JNs.png)
- embedding vectors를 생성했다면 평점을 예측할 수 있습니다.
![image.png](/files/2895552901839497993)
![image.png](/files/2895553358701342327)
- 고객과 고객 또는 아이템과 아이템 간의 유사도를 계산할 수 있습니다.
![image.png](/files/2895553502061139026)

### 3. 단골
- Factorization Machine(FM)